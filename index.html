<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Akina Check | Inspecci√≥n Vehicular</title>
    <style>
        /* ===== RESET Y BASE ===== */
        :root {
            --color-akina: #1e3a8a;
            --color-akina-light: #3b82f6;
            --color-success: #059669;
            --color-warning: #d97706;
            --color-danger: #dc2626;
            --color-text: #1f2937;
            --color-text-light: #6b7280;
            --color-border: #e5e7eb;
            --color-bg: #f9fafb;
            --color-card: #ffffff;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --radius-sm: 0.25rem;
            --radius: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --font-sans: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-sans);
            color: var(--color-text);
            background: var(--color-bg);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            min-height: 100vh;
            position: relative;
        }

        /* ===== TIPOGRAF√çA SISTEMA ===== */
        h1, h2, h3, h4, h5 {
            font-weight: 600;
            line-height: 1.25;
        }

        .text-4xl { font-size: 2.25rem; }
        .text-3xl { font-size: 1.875rem; }
        .text-2xl { font-size: 1.5rem; }
        .text-xl { font-size: 1.25rem; }
        .text-lg { font-size: 1.125rem; }
        .text-base { font-size: 1rem; }
        .text-sm { font-size: 0.875rem; }
        .text-xs { font-size: 0.75rem; }

        .font-medium { font-weight: 500; }
        .font-semibold { font-weight: 600; }
        .font-bold { font-weight: 700; }

        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .text-akina { color: var(--color-akina); }
        .text-muted { color: var(--color-text-light); }

        /* ===== LAYOUT SISTEMA ===== */
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .grid {
            display: grid;
            gap: 1.5rem;
        }

        .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
        .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        .grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
        .grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }

        .flex { display: flex; }
        .items-center { align-items: center; }
        .items-start { align-items: flex-start; }
        .items-end { align-items: flex-end; }
        .justify-between { justify-content: space-between; }
        .justify-center { justify-content: center; }
        .gap-1 { gap: 0.25rem; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 0.75rem; }
        .gap-4 { gap: 1rem; }
        .gap-6 { gap: 1.5rem; }
        .gap-8 { gap: 2rem; }

        .space-y-2 > * + * { margin-top: 0.5rem; }
        .space-y-3 > * + * { margin-top: 0.75rem; }
        .space-y-4 > * + * { margin-top: 1rem; }
        .space-y-6 > * + * { margin-top: 1.5rem; }

        /* ===== COMPONENTES ===== */
        .card {
            background: var(--color-card);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            padding: 1.5rem;
            box-shadow: var(--shadow);
        }

        .card-lg {
            padding: 2rem;
        }

        .card-header {
            border-bottom: 1px solid var(--color-border);
            padding-bottom: 1rem;
            margin-bottom: 1.5rem;
        }

        .divider {
            height: 1px;
            background: var(--color-border);
            width: 100%;
            margin: 1.5rem 0;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
            line-height: 1;
        }

        .badge-critical { background: #fee2e2; color: var(--color-danger); }
        .badge-safety { background: #fef3c7; color: var(--color-warning); }
        .badge-legal { background: #dbeafe; color: var(--color-akina); }
        .badge-esthetic { background: #f3f4f6; color: var(--color-text-light); }

        /* ===== HEADER ===== */
        .app-header {
            padding: 1.5rem 0;
            border-bottom: 1px solid var(--color-border);
            background: var(--color-card);
            position: sticky;
            top: 0;
            z-index: 50;
            backdrop-filter: blur(8px);
            background: rgba(255, 255, 255, 0.95);
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .brand-icon {
            width: 2.5rem;
            height: 2.5rem;
            background: var(--color-akina);
            color: white;
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }

        /* ===== PORTADA ===== */
        .cover {
            border-left: 4px solid var(--color-akina);
        }

        .cover-title {
            text-align: center;
            padding: 2rem 0;
        }

        /* ===== RECOMENDACI√ìN ===== */
        .recommendation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .recommendation-card {
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
            padding: 1.5rem 1rem;
            border-radius: var(--radius-md);
        }

        .recommendation-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .recommendation-card.selected {
            border-color: currentColor;
            background: rgba(0, 0, 0, 0.02);
        }

        .recommendation-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .recommendation-apto { color: var(--color-success); }
        .recommendation-observaciones { color: var(--color-warning); }
        .recommendation-no-recomendado { color: var(--color-danger); }

        /* ===== FORMULARIOS ===== */
        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--color-text);
            margin-bottom: 0.375rem;
        }

        .form-control {
            width: 100%;
            padding: 0.625rem 0.75rem;
            border: 1px solid var(--color-border);
            border-radius: var(--radius);
            font-size: 0.875rem;
            line-height: 1.25;
            transition: all 0.15s ease;
            background: var(--color-card);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--color-akina-light);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .form-textarea {
            min-height: 5rem;
            resize: vertical;
            font-family: var(--font-sans);
        }

        /* ===== CHECKLIST ===== */
        .checklist-section {
            max-height: 600px;
            overflow-y: auto;
            padding-right: 0.5rem;
        }

        .checklist-section::-webkit-scrollbar {
            width: 6px;
        }

        .checklist-section::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        .checklist-section::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }

        .checklist-section::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }

        .checklist-item {
            padding: 0.875rem;
            border: 1px solid var(--color-border);
            border-radius: var(--radius);
            margin-bottom: 0.5rem;
            background: var(--color-card);
            transition: all 0.15s ease;
        }

        .checklist-item:hover {
            border-color: var(--color-akina-light);
            box-shadow: var(--shadow-sm);
        }

        .status-selector {
            display: flex;
            gap: 0.25rem;
        }

        .status-btn {
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            border: 2px solid transparent;
            background: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.875rem;
            transition: all 0.15s ease;
        }

        .status-btn:hover {
            transform: scale(1.1);
        }

        .status-btn.selected {
            color: white;
        }

        .status-conforme {
            color: var(--color-success);
            border-color: var(--color-success);
        }

        .status-conforme.selected {
            background: var(--color-success);
        }

        .status-observacion {
            color: var(--color-warning);
            border-color: var(--color-warning);
        }

        .status-observacion.selected {
            background: var(--color-warning);
        }

        .status-no-conforme {
            color: var(--color-danger);
            border-color: var(--color-danger);
        }

        .status-no-conforme.selected {
            background: var(--color-danger);
        }

        /* ===== ASISTENCIA ===== */
        .assistance-panel {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            padding: 1.5rem;
        }

        .counter-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .counter {
            text-align: center;
        }

        .counter-value {
            font-size: 2.5rem;
            font-weight: 700;
            line-height: 1;
            display: block;
        }

        .counter-label {
            font-size: 0.875rem;
            color: var(--color-text-light);
            margin-top: 0.25rem;
        }

        .counter-observaciones .counter-value { color: var(--color-warning); }
        .counter-no-conformes .counter-value { color: var(--color-danger); }

        .assistance-message {
            padding: 1rem;
            background: white;
            border-radius: var(--radius);
            border-left: 4px solid var(--color-akina);
            font-style: italic;
            font-size: 0.875rem;
        }

        /* ===== VISTA PREVIA ===== */
        .report-preview {
            background: white;
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            padding: 2rem;
            position: relative;
        }

        .report-header {
            text-align: center;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid var(--color-border);
            margin-bottom: 2rem;
        }

        .report-info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            padding: 1.5rem;
            background: #f8fafc;
            border-radius: var(--radius);
            margin-bottom: 2rem;
        }

        .recommendation-display {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: var(--radius-lg);
            font-weight: 600;
            font-size: 0.875rem;
        }

        .recommendation-display-apto {
            background: #d1fae5;
            color: var(--color-success);
        }

        .recommendation-display-observaciones {
            background: #fef3c7;
            color: var(--color-warning);
        }

        .recommendation-display-no-recomendado {
            background: #fee2e2;
            color: var(--color-danger);
        }

        .checklist-summary-item {
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--color-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .checklist-summary-item:last-child {
            border-bottom: none;
        }

        /* ===== BOTONES ===== */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.625rem 1.25rem;
            border: 1px solid transparent;
            border-radius: var(--radius);
            font-size: 0.875rem;
            font-weight: 500;
            line-height: 1.25;
            cursor: pointer;
            transition: all 0.15s ease;
            user-select: none;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-primary {
            background: var(--color-akina);
            color: white;
            border-color: var(--color-akina);
        }

        .btn-primary:hover:not(:disabled) {
            background: #1d4ed8;
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .btn-success {
            background: var(--color-success);
            color: white;
            border-color: var(--color-success);
        }

        .btn-success:hover:not(:disabled) {
            background: #047857;
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .btn-outline {
            background: transparent;
            border-color: var(--color-border);
            color: var(--color-text);
        }

        .btn-outline:hover:not(:disabled) {
            background: #f9fafb;
            border-color: var(--color-akina-light);
        }

        .btn-group {
            display: flex;
            gap: 0.5rem;
        }

        /* ===== FOOTER ===== */
        .app-footer {
            padding: 2rem 0;
            border-top: 1px solid var(--color-border);
            margin-top: 3rem;
            color: var(--color-text-light);
            font-size: 0.875rem;
        }

        .developer-credit {
            color: var(--color-text-light);
            text-decoration: none;
            transition: color 0.15s ease;
        }

        .developer-credit:hover {
            color: var(--color-akina);
        }

        /* ===== UTILIDADES ===== */
        .mt-1 { margin-top: 0.25rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-3 { margin-top: 0.75rem; }
        .mt-4 { margin-top: 1rem; }
        .mt-6 { margin-top: 1.5rem; }
        .mt-8 { margin-top: 2rem; }
        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-8 { margin-bottom: 2rem; }
        .mx-auto { margin-left: auto; margin-right: auto; }

        .hidden { display: none !important; }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .grid-cols-2,
            .grid-cols-3,
            .grid-cols-4 {
                grid-template-columns: 1fr;
            }

            .recommendation-grid {
                grid-template-columns: 1fr;
            }

            .counter-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .report-info-grid {
                grid-template-columns: 1fr;
            }

            .btn-group {
                flex-direction: column;
                width: 100%;
            }

            .btn-group .btn {
                width: 100%;
            }
        }

        /* ===== ANIMACIONES ===== */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fadeIn {
            animation: fadeIn 0.3s ease-out;
        }

        /* ===== IMPRESI√ìN ===== */
        @media print {
            .no-print,
            .btn-group,
            .assistance-panel,
            .checklist-section {
                display: none !important;
            }

            body {
                background: white;
                padding: 0;
            }

            .report-preview {
                border: none;
                padding: 0;
                box-shadow: none;
                max-width: none;
            }

            .container {
                max-width: none;
                padding: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="app-header">
        <div class="container">
            <div class="brand">
                <div class="brand-icon">AC</div>
                <div>
                    <div class="text-xl font-bold text-akina">AKINA CHECK</div>
                    <div class="text-sm text-muted">Informe profesional de inspecci√≥n vehicular</div>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Portada -->
        <section class="card card-lg cover mt-8 animate-fadeIn">
            <div class="cover-title">
                <h1 class="text-3xl font-bold text-akina mb-2">Informe de Inspecci√≥n Vehicular</h1>
                <p class="text-muted">Evaluaci√≥n t√©cnica pre-compra | Documento profesional</p>
            </div>

            <!-- Recomendaci√≥n -->
            <div class="card mb-6">
                <div class="card-header">
                    <h2 class="text-xl font-semibold">Evaluaci√≥n del Inspector</h2>
                    <p class="text-sm text-muted mt-1">Seleccione su recomendaci√≥n basada en el an√°lisis t√©cnico</p>
                </div>
                
                <div class="recommendation-grid">
                    <div class="recommendation-card recommendation-apto" data-value="apto">
                        <div class="recommendation-icon">üü¢</div>
                        <h3 class="font-semibold">Apto para compra</h3>
                        <p class="text-sm text-muted mt-1">Veh√≠culo en condiciones √≥ptimas</p>
                    </div>
                    
                    <div class="recommendation-card recommendation-observaciones" data-value="observaciones">
                        <div class="recommendation-icon">üü°</div>
                        <h3 class="font-semibold">Apto con observaciones</h3>
                        <p class="text-sm text-muted mt-1">Requiere ajustes o reparaciones menores</p>
                    </div>
                    
                    <div class="recommendation-card recommendation-no-recomendado" data-value="no-recomendado">
                        <div class="recommendation-icon">üî¥</div>
                        <h3 class="font-semibold">No recomendado</h3>
                        <p class="text-sm text-muted mt-1">Problemas cr√≠ticos detectados</p>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Fundamento t√©cnico (m√°x. 200 caracteres)</label>
                    <textarea id="fundamento" class="form-control form-textarea" placeholder="Describa brevemente el razonamiento t√©cnico de su evaluaci√≥n..." maxlength="200"></textarea>
                    <div class="flex justify-between items-center mt-2">
                        <span class="text-xs text-muted">Lenguaje claro y profesional</span>
                        <span class="text-xs font-mono">
                            <span id="char-count">0</span>/200
                        </span>
                    </div>
                </div>
            </div>

            <!-- Datos del veh√≠culo -->
            <div class="grid grid-cols-2 gap-6">
                <div class="form-group">
                    <label class="form-label">Veh√≠culo</label>
                    <input type="text" id="vehiculo" class="form-control" placeholder="Marca, modelo, versi√≥n">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Dominio / Patente</label>
                    <input type="text" id="dominio" class="form-control" placeholder="Ej: AB 123 CD">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Kilometraje</label>
                    <input type="text" id="kilometraje" class="form-control" placeholder="Ej: 125.500 km">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Fecha de inspecci√≥n</label>
                    <input type="date" id="fecha" class="form-control">
                </div>
            </div>
        </section>

        <!-- Contenido principal -->
        <div class="grid grid-cols-2 gap-8 mt-8">
            <!-- Datos y observaciones -->
            <section class="animate-fadeIn" style="animation-delay: 0.1s">
                <div class="card">
                    <div class="card-header">
                        <h2 class="text-xl font-semibold">üìã Datos del veh√≠culo</h2>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Observaciones generales</label>
                        <textarea id="observaciones" class="form-control form-textarea" rows="4" placeholder="Anotaciones relevantes no cubiertas en el checklist..."></textarea>
                    </div>

                    <!-- Asistencia inteligente -->
                    <div class="assistance-panel mt-6">
                        <div class="counter-grid">
                            <div class="counter counter-observaciones">
                                <span class="counter-value" id="contador-observaciones">0</span>
                                <span class="counter-label">Observaciones detectadas</span>
                            </div>
                            
                            <div class="counter counter-no-conformes">
                                <span class="counter-value" id="contador-no-conformes">0</span>
                                <span class="counter-label">√çtems no conformes</span>
                            </div>
                        </div>
                        
                        <div class="assistance-message" id="mensaje-asistencia">
                            <!-- Mensaje din√°mico -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Checklist -->
            <section class="animate-fadeIn" style="animation-delay: 0.2s">
                <div class="card">
                    <div class="card-header">
                        <div class="flex justify-between items-center">
                            <h2 class="text-xl font-semibold">‚úÖ Checklist t√©cnico</h2>
                            <div class="text-sm text-muted">15 √≠tems</div>
                        </div>
                    </div>
                    
                    <div class="checklist-section" id="checklist-container">
                        <!-- Generado din√°micamente -->
                    </div>
                </div>
            </section>
        </div>

        <!-- Vista previa -->
        <section class="mt-8 animate-fadeIn" style="animation-delay: 0.3s">
            <div class="report-preview" id="report-preview">
                <div class="report-header">
                    <h2 class="text-3xl font-bold text-akina">INFORME DE INSPECCI√ìN VEHICULAR</h2>
                    <div class="text-sm text-muted mt-2">AKINA CHECK | Documento t√©cnico profesional</div>
                </div>
                
                <div class="report-info-grid">
                    <div class="space-y-2">
                        <div>
                            <div class="text-sm text-muted">Veh√≠culo</div>
                            <div class="font-semibold" id="preview-vehiculo">[No especificado]</div>
                        </div>
                        <div>
                            <div class="text-sm text-muted">Dominio</div>
                            <div class="font-semibold" id="preview-dominio">[No especificado]</div>
                        </div>
                        <div>
                            <div class="text-sm text-muted">Kilometraje</div>
                            <div class="font-semibold" id="preview-kilometraje">[No especificado]</div>
                        </div>
                        <div>
                            <div class="text-sm text-muted">Fecha de inspecci√≥n</div>
                            <div class="font-semibold" id="preview-fecha">[No especificada]</div>
                        </div>
                    </div>
                    
                    <div class="space-y-4">
                        <div>
                            <div class="text-sm text-muted mb-2">Evaluaci√≥n del inspector</div>
                            <div class="recommendation-display" id="preview-recomendacion">
                                No seleccionada
                            </div>
                        </div>
                        <div>
                            <div class="text-sm text-muted mb-2">Fundamento t√©cnico</div>
                            <div class="text-sm" id="preview-fundamento">[No especificado]</div>
                        </div>
                    </div>
                </div>
                
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-3">Observaciones generales</h3>
                    <div class="text-sm" id="preview-observaciones">[Sin observaciones generales]</div>
                </div>
                
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-3">Resumen de verificaci√≥n t√©cnica</h3>
                    <div id="checklist-resumen">
                        <!-- Generado din√°micamente -->
                    </div>
                </div>
                
                <div class="divider"></div>
                
                <div class="flex justify-between items-center text-sm text-muted">
                    <div>Informe realizado por Akina Check</div>
                    <div>Documento generado: <span id="fecha-generacion"></span></div>
                </div>
                <div class="text-xs text-center text-muted mt-2">
                    Desarrollado por AFM Solutions ¬∑ afmsolutions.com.ar
                </div>
            </div>
        </section>

        <!-- Acciones -->
        <div class="flex justify-center gap-4 mt-8 mb-8 no-print">
            <div class="btn-group">
                <button class="btn btn-outline" id="btn-actualizar">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                    </svg>
                    Actualizar vista previa
                </button>
                <button class="btn btn-success" id="btn-pdf">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    Generar PDF
                </button>
            </div>
        </div>

        <!-- Aviso comercial -->
        <div class="text-center text-sm text-muted mt-8 mb-8 no-print">
            <div class="card">
                <p class="font-medium">Versi√≥n de evaluaci√≥n profesional</p>
                <p class="mt-1">Funciones avanzadas disponibles bajo contrataci√≥n</p>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="app-footer">
        <div class="container">
            <div class="text-center space-y-2">
                <div class="font-medium">AKINA CHECK ¬∑ Sistema de informes de inspecci√≥n vehicular</div>
                <div>
                    <a href="https://afmsolutions.com.ar" class="developer-credit" target="_blank">
                        Desarrollado por AFM Solutions ¬∑ afmsolutions.com.ar
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Script principal -->
    <script>
        // ===== CONFIGURACI√ìN =====
        const CONFIG = {
            version: '1.0.0',
            checklist: [
                { id: 1, categoria: 'critico', texto: 'Motor: funcionamiento, ruidos anormales, fugas de aceite/refrigerante' },
                { id: 2, categoria: 'critico', texto: 'Transmisi√≥n: cambios suaves, ruidos, fugas de aceite' },
                { id: 3, categoria: 'critico', texto: 'Sistema de frenos: funcionamiento, desgaste, nivel de l√≠quido' },
                { id: 4, categoria: 'seguridad', texto: 'Suspensi√≥n: amortiguadores, brazos, r√≥tulas, silentblocks' },
                { id: 5, categoria: 'seguridad', texto: 'Direcci√≥n: alineaci√≥n, funcionamiento, juego en volante' },
                { id: 6, categoria: 'seguridad', texto: 'Neum√°ticos: desgaste, presi√≥n, estado general' },
                { id: 7, categoria: 'seguridad', texto: 'Sistema el√©ctrico: bater√≠a, alternador, luces, instrumentos' },
                { id: 8, categoria: 'legal', texto: 'Documentaci√≥n: VTV vigente, c√©dula verde/azul, patente' },
                { id: 9, categoria: 'legal', texto: 'Identificaci√≥n: chasis y motor coincidentes con documentaci√≥n' },
                { id: 10, categoria: 'legal', texto: 'Historial: choques importantes o reparaciones estructurales' },
                { id: 11, categoria: 'estetico', texto: 'Carrocer√≠a: pintura, abolladuras, √≥xido, estado general' },
                { id: 12, categoria: 'estetico', texto: 'Interior: tapizados, tablero, funcionamiento de accesorios' },
                { id: 13, categoria: 'estetico', texto: 'Vidrios y espejos: estado, funcionamiento' },
                { id: 14, categoria: 'estetico', texto: 'Limpieza general: interior y exterior' },
                { id: 15, categoria: 'seguridad', texto: 'Seguridad activa: ABS, ESP, airbags (testigos correctos)' }
            ],
            categorias: {
                critico: { nombre: 'Cr√≠tico', badge: 'badge-critical' },
                seguridad: { nombre: 'Seguridad', badge: 'badge-safety' },
                legal: { nombre: 'Legal', badge: 'badge-legal' },
                estetico: { nombre: 'Est√©tico', badge: 'badge-esthetic' }
            },
            estados: {
                'conforme': { texto: 'Conforme', clase: 'status-conforme' },
                'observacion': { texto: 'Observaci√≥n', clase: 'status-observacion' },
                'no-conforme': { texto: 'No conforme', clase: 'status-no-conforme' },
                'no-evaluado': { texto: 'No evaluado', clase: '' }
            }
        };

        // ===== ESTADO =====
        const AppState = {
            recomendacion: null,
            checklist: {},
            ultimaActualizacion: null,
            
            // M√©todos de estado
            setRecomendacion(valor) {
                this.recomendacion = valor;
                this.guardarEnStorage();
                return this;
            },
            
            setChecklistItem(id, estado) {
                this.checklist[id] = estado;
                this.guardarEnStorage();
                return this;
            },
            
            guardarEnStorage() {
                try {
                    const estado = {
                        recomendacion: this.recomendacion,
                        checklist: this.checklist,
                        timestamp: Date.now()
                    };
                    localStorage.setItem('akina-check-state', JSON.stringify(estado));
                } catch (e) {
                    console.warn('No se pudo guardar en localStorage:', e);
                }
            },
            
            cargarDesdeStorage() {
                try {
                    const guardado = localStorage.getItem('akina-check-state');
                    if (guardado) {
                        const estado = JSON.parse(guardado);
                        this.recomendacion = estado.recomendacion;
                        this.checklist = estado.checklist || {};
                    }
                } catch (e) {
                    console.warn('No se pudo cargar desde localStorage:', e);
                }
                return this;
            },
            
            reset() {
                this.recomendacion = null;
                this.checklist = {};
                localStorage.removeItem('akina-check-state');
                return this;
            }
        };

        // ===== DOM Y UTILIDADES =====
        const DOM = {
            get(id) {
                return document.getElementById(id);
            },
            
            crear(tag, clases = '', contenido = '') {
                const el = document.createElement(tag);
                if (clases) el.className = clases;
                if (contenido) el.innerHTML = contenido;
                return el;
            },
            
            formatearFecha(fechaStr) {
                if (!fechaStr) return '[No especificada]';
                const fecha = new Date(fechaStr);
                return fecha.toLocaleDateString('es-AR', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric'
                });
            },
            
            obtenerValorCampo(id, defecto = '') {
                const campo = this.get(id);
                return campo ? campo.value.trim() : defecto;
            }
        };

        // ===== CHECKLIST MANAGER =====
        const ChecklistManager = {
            init() {
                this.render();
                this.cargarEstadosGuardados();
                this.setupEventos();
            },
            
            render() {
                const container = DOM.get('checklist-container');
                container.innerHTML = '';
                
                // Agrupar por categor√≠a
                const itemsPorCategoria = this.agruparPorCategoria();
                
                // Renderizar cada categor√≠a
                Object.entries(itemsPorCategoria).forEach(([categoriaId, items]) => {
                    const categoria = CONFIG.categorias[categoriaId];
                    
                    const seccionCategoria = DOM.crear('div', 'mb-6');
                    
                    // Header de categor√≠a
                    const header = DOM.crear('div', 'flex items-center gap-2 mb-3');
                    header.innerHTML = `
                        <span class="${categoria.badge}">${categoria.nombre}</span>
                        <span class="text-sm text-muted">${items.length} √≠tems</span>
                    `;
                    seccionCategoria.appendChild(header);
                    
                    // Items
                    items.forEach(item => {
                        const estadoActual = AppState.checklist[item.id] || null;
                        seccionCategoria.appendChild(this.crearItem(item, estadoActual));
                    });
                    
                    container.appendChild(seccionCategoria);
                });
            },
            
            agruparPorCategoria() {
                return CONFIG.checklist.reduce((grupos, item) => {
                    if (!grupos[item.categoria]) {
                        grupos[item.categoria] = [];
                    }
                    grupos[item.categoria].push(item);
                    return grupos;
                }, {});
            },
            
            crearItem(item, estadoActual) {
                const div = DOM.crear('div', 'checklist-item');
                div.dataset.id = item.id;
                
                div.innerHTML = `
                    <div class="flex items-start justify-between">
                        <div class="flex-1">
                            <div class="font-medium text-sm">${item.texto}</div>
                        </div>
                        <div class="status-selector">
                            <button class="status-btn status-conforme ${estadoActual === 'conforme' ? 'selected' : ''}" 
                                    data-estado="conforme" title="Conforme">
                                ‚úì
                            </button>
                            <button class="status-btn status-observacion ${estadoActual === 'observacion' ? 'selected' : ''}" 
                                    data-estado="observacion" title="Observaci√≥n">
                                !
                            </button>
                            <button class="status-btn status-no-conforme ${estadoActual === 'no-conforme' ? 'selected' : ''}" 
                                    data-estado="no-conforme" title="No conforme">
                                ‚úó
                            </button>
                        </div>
                    </div>
                `;
                
                return div;
            },
            
            setupEventos() {
                DOM.get('checklist-container').addEventListener('click', (e) => {
                    const btn = e.target.closest('.status-btn');
                    if (!btn) return;
                    
                    const item = btn.closest('.checklist-item');
                    const itemId = parseInt(item.dataset.id);
                    const nuevoEstado = btn.dataset.estado;
                    
                    this.setEstado(itemId, nuevoEstado, item);
                });
            },
            
            setEstado(itemId, estado, elemento) {
                // Actualizar estado
                AppState.setChecklistItem(itemId, estado);
                
                // Actualizar UI
                elemento.querySelectorAll('.status-btn').forEach(btn => {
                    btn.classList.remove('selected');
                });
                elemento.querySelector(`[data-estado="${estado}"]`).classList.add('selected');
                
                // Actualizar contadores y asistencia
                this.actualizarContadores();
                AsistenciaManager.actualizarMensaje();
            },
            
            cargarEstadosGuardados() {
                CONFIG.checklist.forEach(item => {
                    if (AppState.checklist[item.id]) {
                        const elemento = document.querySelector(`[data-id="${item.id}"]`);
                        if (elemento) {
                            const estado = AppState.checklist[item.id];
                            elemento.querySelectorAll('.status-btn').forEach(btn => {
                                btn.classList.remove('selected');
                                if (btn.dataset.estado === estado) {
                                    btn.classList.add('selected');
                                }
                            });
                        }
                    }
                });
                this.actualizarContadores();
            },
            
            actualizarContadores() {
                let observaciones = 0;
                let noConformes = 0;
                
                Object.values(AppState.checklist).forEach(estado => {
                    if (estado === 'observacion') observaciones++;
                    if (estado === 'no-conforme') noConformes++;
                });
                
                DOM.get('contador-observaciones').textContent = observaciones;
                DOM.get('contador-no-conformes').textContent = noConformes;
                
                return { observaciones, noConformes };
            },
            
            obtenerResumen() {
                const itemsPorCategoria = this.agruparPorCategoria();
                let html = '';
                
                Object.entries(itemsPorCategoria).forEach(([categoriaId, items]) => {
                    const categoria = CONFIG.categorias[categoriaId];
                    
                    html += `
                        <div class="mb-4">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="${categoria.badge}">${categoria.nombre}</span>
                            </div>
                    `;
                    
                    items.forEach(item => {
                        const estado = AppState.checklist[item.id] || 'no-evaluado';
                        const estadoInfo = CONFIG.estados[estado];
                        const color = estado === 'conforme' ? 'text-green-600' : 
                                     estado === 'observacion' ? 'text-yellow-600' : 
                                     estado === 'no-conforme' ? 'text-red-600' : 'text-gray-400';
                        
                        html += `
                            <div class="checklist-summary-item">
                                <div class="text-sm">${item.texto}</div>
                                <div class="text-sm font-medium ${color}">${estadoInfo.texto}</div>
                            </div>
                        `;
                    });
                    
                    html += `</div>`;
                });
                
                return html;
            }
        };

        // ===== ASISTENCIA MANAGER =====
        const AsistenciaManager = {
            actualizarMensaje() {
                const contadores = ChecklistManager.actualizarContadores();
                const mensajeEl = DOM.get('mensaje-asistencia');
                
                let mensaje = 'Complete el checklist para obtener informaci√≥n de contexto.';
                
                if (contadores.noConformes > 0) {
                    mensaje = '<strong>Atenci√≥n:</strong> Se detectaron √≠tems no conformes que requieren atenci√≥n prioritaria antes de considerar la compra.';
                } else if (contadores.observaciones > 3) {
                    mensaje = 'Se detectan m√∫ltiples observaciones que pueden implicar gastos adicionales a considerar en la evaluaci√≥n.';
                } else if (contadores.observaciones > 0) {
                    mensaje = 'Observaciones detectadas. Considere estas notas en su evaluaci√≥n profesional final.';
                }
                
                mensajeEl.innerHTML = mensaje;
            }
        };

        // ===== VISTA PREVIA MANAGER =====
        const VistaPreviaManager = {
            actualizar() {
                this.actualizarDatosVehiculo();
                this.actualizarRecomendacion();
                this.actualizarChecklistResumen();
                this.actualizarFechaGeneracion();
                
                AppState.ultimaActualizacion = new Date();
            },
            
            actualizarDatosVehiculo() {
                DOM.get('preview-vehiculo').textContent = 
                    DOM.obtenerValorCampo('vehiculo', '[No especificado]');
                
                DOM.get('preview-dominio').textContent = 
                    DOM.obtenerValorCampo('dominio', '[No especificado]');
                
                DOM.get('preview-kilometraje').textContent = 
                    DOM.obtenerValorCampo('kilometraje', '[No especificado]');
                
                DOM.get('preview-fecha').textContent = 
                    DOM.formatearFecha(DOM.obtenerValorCampo('fecha'));
                
                const obs = DOM.obtenerValorCampo('observaciones');
                DOM.get('preview-observaciones').textContent = 
                    obs || '[Sin observaciones generales]';
            },
            
            actualizarRecomendacion() {
                const fundamento = DOM.obtenerValorCampo('fundamento');
                DOM.get('preview-fundamento').textContent = fundamento || '[No especificado]';
                
                const badge = DOM.get('preview-recomendacion');
                badge.className = 'recommendation-display';
                
                switch(AppState.recomendacion) {
                    case 'apto':
                        badge.className += ' recommendation-display-apto';
                        badge.textContent = 'üü¢ Apto para compra';
                        break;
                    case 'observaciones':
                        badge.className += ' recommendation-display-observaciones';
                        badge.textContent = 'üü° Apto con observaciones';
                        break;
                    case 'no-recomendado':
                        badge.className += ' recommendation-display-no-recomendado';
                        badge.textContent = 'üî¥ No recomendado';
                        break;
                    default:
                        badge.textContent = 'No seleccionada';
                }
            },
            
            actualizarChecklistResumen() {
                DOM.get('checklist-resumen').innerHTML = ChecklistManager.obtenerResumen();
            },
            
            actualizarFechaGeneracion() {
                const ahora = new Date();
                DOM.get('fecha-generacion').textContent = 
                    `${ahora.toLocaleDateString('es-AR')} ${ahora.toLocaleTimeString('es-AR', { hour: '2-digit', minute: '2-digit' })}`;
            }
        };

        // ===== PDF MANAGER =====
        const PDFManager = {
            async generar() {
                // Validaciones
                if (!AppState.recomendacion) {
                    this.mostrarError('Por favor, seleccione una evaluaci√≥n antes de generar el PDF.');
                    return;
                }
                
                if (!DOM.obtenerValorCampo('fundamento')) {
                    this.mostrarError('Por favor, ingrese el fundamento t√©cnico de su evaluaci√≥n.');
                    return;
                }
                
                // Estado del bot√≥n
                const btn = DOM.get('btn-pdf');
                const textoOriginal = btn.innerHTML;
                btn.innerHTML = 'üîÑ Generando PDF...';
                btn.disabled = true;
                
                try {
                    // Cargar librer√≠as
                    await this.cargarLibrerias();
                    
                    // Actualizar vista previa antes de capturar
                    VistaPreviaManager.actualizar();
                    
                    // Generar PDF
                    const elemento = DOM.get('report-preview');
                    const { jsPDF } = window.jspdf;
                    
                    const pdf = new jsPDF({
                        orientation: 'portrait',
                        unit: 'mm',
                        format: 'a4'
                    });
                    
                    // Capturar como imagen
                    const canvas = await html2canvas(elemento, {
                        scale: 2,
                        useCORS: true,
                        logging: false,
                        backgroundColor: '#ffffff',
                        removeContainer: true
                    });
                    
                    const imgData = canvas.toDataURL('image/png');
                    const imgWidth = 190;
                    const imgHeight = canvas.height * imgWidth / canvas.width;
                    
                    // Agregar imagen al PDF
                    pdf.addImage(imgData, 'PNG', 10, 10, imgWidth, imgHeight);
                    
                    // Pie de p√°gina discreto
                    pdf.setFontSize(8);
                    pdf.setTextColor(128, 128, 128);
                    pdf.text('Desarrollado por AFM Solutions ¬∑ afmsolutions.com.ar', 105, 290, { align: 'center' });
                    
                    // Descargar
                    const dominio = DOM.obtenerValorCampo('dominio') || 'informe';
                    const fecha = DOM.obtenerValorCampo('fecha') || new Date().toISOString().split('T')[0];
                    pdf.save(`Informe_AkinaCheck_${dominio}_${fecha}.pdf`);
                    
                } catch (error) {
                    console.error('Error generando PDF:', error);
                    this.mostrarError('Error al generar el PDF. Por favor, intente nuevamente.');
                } finally {
                    // Restaurar bot√≥n
                    btn.innerHTML = textoOriginal;
                    btn.disabled = false;
                }
            },
            
            async cargarLibrerias() {
                const cargarScript = (src) => new Promise((resolve, reject) => {
                    if (document.querySelector(`script[src="${src}"]`)) {
                        resolve();
                        return;
                    }
                    
                    const script = document.createElement('script');
                    script.src = src;
                    script.onload = resolve;
                    script.onerror = reject;
                    document.head.appendChild(script);
                });
                
                await Promise.all([
                    cargarScript('https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js'),
                    cargarScript('https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js')
                ]);
            },
            
            mostrarError(mensaje) {
                alert(mensaje);
            }
        };

        // ===== INICIALIZACI√ìN =====
        document.addEventListener('DOMContentLoaded', () => {
            // Cargar estado guardado
            AppState.cargarDesdeStorage();
            
            // Configurar fecha actual
            const hoy = new Date().toISOString().split('T')[0];
            DOM.get('fecha').value = hoy;
            
            // Inicializar componentes
            ChecklistManager.init();
            AsistenciaManager.actualizarMensaje();
            VistaPreviaManager.actualizar();
            
            // Configurar eventos
            this.setupEventos();
            
            // Configurar contador de caracteres
            DOM.get('fundamento').addEventListener('input', (e) => {
                DOM.get('char-count').textContent = e.target.value.length;
            });
        });

        // ===== EVENTOS GLOBALES =====
        function setupEventos() {
            // Recomendaci√≥n
            document.querySelectorAll('.recommendation-card').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.recommendation-card').forEach(c => {
                        c.classList.remove('selected');
                    });
                    this.classList.add('selected');
                    AppState.setRecomendacion(this.dataset.value);
                    VistaPreviaManager.actualizarRecomendacion();
                });
            });
            
            // Campos que actualizan vista previa
            ['vehiculo', 'dominio', 'kilometraje', 'fecha', 'fundamento', 'observaciones'].forEach(id => {
                DOM.get(id).addEventListener('input', () => VistaPreviaManager.actualizar());
            });
            
            // Botones de acci√≥n
            DOM.get('btn-actualizar').addEventListener('click', () => VistaPreviaManager.actualizar());
            DOM.get('btn-pdf').addEventListener('click', () => PDFManager.generar());
            
            // Cargar recomendaci√≥n guardada
            if (AppState.recomendacion) {
                const card = document.querySelector(`.recommendation-card[data-value="${AppState.recomendacion}"]`);
                if (card) {
                    card.classList.add('selected');
                    VistaPreviaManager.actualizarRecomendacion();
                }
            }
        }

        // ===== API P√öBLICA (para consola de desarrollador) =====
        window.AkinaCheck = {
            version: CONFIG.version,
            estado: AppState,
            checklist: ChecklistManager,
            vistaPrevia: VistaPreviaManager,
            pdf: PDFManager,
            resetear: () => {
                AppState.reset();
                location.reload();
            },
            exportarDatos: () => {
                return {
                    version: CONFIG.version,
                    timestamp: new Date().toISOString(),
                    estado: {
                        recomendacion: AppState.recomendacion,
                        checklist: AppState.checklist
                    },
                    datos: {
                        vehiculo: DOM.obtenerValorCampo('vehiculo'),
                        dominio: DOM.obtenerValorCampo('dominio'),
                        kilometraje: DOM.obtenerValorCampo('kilometraje'),
                        fecha: DOM.obtenerValorCampo('fecha'),
                        fundamento: DOM.obtenerValorCampo('fundamento'),
                        observaciones: DOM.obtenerValorCampo('observaciones')
                    }
                };
            }
        };

        // Mostrar versi√≥n en consola
        console.log(`%cAKINA CHECK v${CONFIG.version}`, 'color: #1e3a8a; font-weight: bold; font-size: 14px;');
        console.log('Acceso a API de desarrollo: window.AkinaCheck');
    </script>
</body>
</html>
